# 题目 01- 一条 SQL 语句在 MySQL 中是如何执行的？

1. **连接到数据库**

    首先通过连接器，连接到数据库，连接器在超过配置的空闲等待时间后会自动断开，默认配置是8小时

2. **查询缓存（MySQL8.0之后版本去除）**

    mysql 在开启缓存功能后，会将之前执行过的语句以及结果以 key-value 的形式缓存在内存中，key 是语句hash之后的值， value 是查询结果。

    如果查询语句在缓存中，则直接将结果返回给客户端，如果查询语句不在缓存中，则进行后面的执行步骤，执行后的结果会保存入缓存中。

3. **分析sql语句**

    1. 词法分析：将SQL分解为字符串，识别出字符串中的关键字、表名、列名等
    2. 语法分析：按照MySQL中的语法规则，将SQL生成解析树
    3. 预处理器：检查解析树是否合法，表名、列名等是否存在，检查用户是否有表的操作权限，生成一个新的解析树，调用执行模块
   
4. **优化sql语句**
    
    根据解析树生成不同的执行计划，选择最优的执行计划（io_cost 和 cpu_cost 总和开销最小）

5. **执行sql语句**
    
    1. 判断是否有执行权限，如果没有权限，返回没有权限的报错
    2. 如果有权限，执行器根据表使用的存储引擎，调用存储引擎的接口查询数据，返回结果给客户端。

# 题目 02- 请解释一下你理解的事务是什么？